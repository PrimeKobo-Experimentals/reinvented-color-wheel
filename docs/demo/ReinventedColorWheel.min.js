!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.ReinventedColorWheel=t()}(this,function(){"use strict";var n,i,r;function o(e,t,n){return Math.min(Math.max(e,t),n)}function u(e,t){var n=e%t;return n<0?n+t:n}function e(){}function d(e){e.preventDefault()}return"PointerEvent"in window?(n=function(t,n){return t.addEventListener("pointerdown",function(e){return r=t,n(e)})},i=function(t,n){return addEventListener("pointermove",function(e){return r===t&&n(e)})},addEventListener("pointerup",function(){return r=void 0})):"ontouchend"in window?(n=function(e,t){return e.addEventListener("touchstart",function(e){return e.preventDefault(),t(e.targetTouches[0])})},i=function(e,t){return e.addEventListener("touchmove",function(e){return e.preventDefault(),t(e.targetTouches[0])})}):(n=function(t,n){return t.addEventListener("mousedown",function(e){return r=t,n(e)})},i=function(t,n){return addEventListener("mousemove",function(e){return r===t&&n(e)})},addEventListener("mouseup",function(){return r=void 0})),function(){function l(e){var t=this;this.h=NaN,this.s=NaN,this.l=NaN;var n=l.defaultOptions,i=this.wheelDiameter=e.wheelDiameter||n.wheelDiameter,r=this.wheelThickness=e.wheelThickness||n.wheelThickness,o=this.handleDiameter=e.handleDiameter||n.handleDiameter;this.onChange=e.onChange||n.onChange;var h=this.containerElement=e.parentElement.appendChild(document.createElement("div")),a=h.style;a.position="relative",a.display="inline-block",a.lineHeight=0,h.addEventListener("pointerdown",d),h.addEventListener("mousedown",d),this.wheelElement=h.appendChild(l._createWheelElement(i,function(e){"number"==typeof e&&(e=u(0|e,360))!==t.h&&(t.h=e,t._redrawHandle(),t.onChange(t))})),this.handleElement=h.appendChild(l._createHandleElement(o));var s=h.appendChild(document.createElement("div")).style;s.position="absolute",s.borderRadius="50%",s.left=s.top=r+"px",s.width=s.height=i-r-r+"px",this.setHSL({h:"number"==typeof e.h?e.h:n.h,s:"number"==typeof e.s?e.s:n.s,l:"number"==typeof e.l?e.l:n.l})}return l.prototype.setHSL=function(e){var t;"number"==typeof e.s&&e.s!==this.s&&(this.s=o(0|e.s,0,100),t=!0),"number"==typeof e.l&&e.l!==this.l&&(this.l=o(0|e.l,0,100),t=!0),t&&this._redrawWheel(),"number"==typeof e.h&&e.h!==this.h&&(this.h=u(0|e.h,360),this._redrawHandle())},l.prototype._redrawWheel=function(){for(var e=this.wheelDiameter/2,t=e-this.wheelThickness/2,n=this.wheelElement.getContext("2d"),i=Math.PI/180,r=0;r<360;r++)n.beginPath(),n.arc(e,e,t,(r-90.6)*i,(r-89.4)*i),n.strokeStyle="hsl("+r+","+this.s+"%,"+this.l+"%)",n.lineWidth=this.wheelThickness,n.stroke()},l.prototype._redrawHandle=function(){var e=this.wheelDiameter/2,t=e-this.wheelThickness/2,n=(this.h-90)*Math.PI/180;this.handleElement.style.left=t*Math.cos(n)+e+"px",this.handleElement.style.top=t*Math.sin(n)+e+"px"},l._createWheelElement=function(a,s){var l=document.createElement("canvas"),e=l.style;l.width=l.height=a,e.borderRadius="50%",e.touchAction="manipulation",e.touchAction="none",e.webkitTouchCallout="none",e.webkitTapHighlightColor="transparent";var t=function(e){var t=l.getBoundingClientRect(),n=a/2,i=e.clientX-t.left-n,r=e.clientY-t.top-n,o=Math.atan2(r,i),h=Math.round(180*o/Math.PI+90);s(h)};return n(l,t),i(l,t),l},l._createHandleElement=function(e){var t=document.createElement("div"),n=t.style;return n.pointerEvents="none",n.position="absolute",n.borderRadius="50%",n.border="2px solid white",n.boxShadow="0 0 0 1px black inset",n.boxSizing="border-box",n.width=t.style.height=e+"px",n.marginLeft=n.marginTop=-e/2+"px",t},l.defaultOptions={h:0,s:100,l:50,wheelDiameter:200,wheelThickness:20,handleDiameter:16,onChange:e},l}()});