var ReinventedColorWheel=function(){"use strict"
var e=function(e){var t=e[0],n=e[1]/100,i=e[2]/100
return 0===i?[0,0,0]:[t,100*(2*(n*=(i*=2)<=1?i:2-i)/(i+n)),100*((i+n)/2)]}
var t=function(e){var t,n,i=e[0],h=e[1]/100,r=e[2]/100
return t=h*r,[i,100*(t=(t/=(n=(2-h)*r)<=1?n:2-n)||0),100*(n/=2)]}
function n(e){var t=e[0],n=e[1],i=e[2],h=Math.max(t,n,i),r=h-Math.min(t,n,i),s=r&&60*(h===t?(n-i)/r%6:h===n?(i-t)/r+2:(t-n)/r+4)
return[s<0?s+360:s,h&&100*r/h,100*h/255]}function i(e){var t=e[0]/60,n=e[1]/100,i=e[2]/100,h=i*n,r=i-h,s=255*(h*(1-Math.abs(t%2-1))+r)+.5|0,a=255*(h+r)+.5|0,o=255*r+.5|0,l=0|t
return 1===l?[s,a,o]:2===l?[o,a,s]:3===l?[o,s,a]:4===l?[s,o,a]:5===l?[a,o,s]:[a,s,o]}var h=function(e,t,n){return Math.min(Math.max(e,t),n)}
function r(e){var t=Math.round(h(e,0,255)).toString(16)
return 1==t.length?"0"+t:t}var s=function(e){var t=4===e.length?r(255*e[3]):""
return"#"+r(e[0])+r(e[1])+r(e[2])+t}
var a=function(e){4!==e.length&&5!==e.length||(e=function(e){for(var t="#",n=1;n<e.length;n++){var i=e.charAt(n)
t+=i+i}return t}(e))
var t=[parseInt(e.substring(1,3),16),parseInt(e.substring(3,5),16),parseInt(e.substring(5,7),16)]
if(9===e.length){var n=parseFloat((parseInt(e.substring(7,9),16)/255).toFixed(2))
t.push(n)}return t}
function o(e,t){return e?[v(e[0])?u(e[0]):t[0],v(e[1])?c(e[1]):t[1],v(e[2])?c(e[2]):t[2]]:t}function l(e){return[u(e[0]),c(e[1]),c(e[2])]}function u(e){var t=Math.round(e%360*10)/10
return t<0?t+360:t}function c(e){return e<0?0:e>100?100:(10*e+.5|0)/10}function v(e){return"number"==typeof e&&isFinite(e)}var d="PointerEvent"in window?function(e,t,n){var i=!1
e.addEventListener("pointerdown",function(e){0===e.button&&!1!==t(e)&&(i=!0,this.setPointerCapture(e.pointerId))}),e.addEventListener("pointermove",function(e){i&&n(e)}),e.addEventListener("pointerup",function(e){i=!1,this.releasePointerCapture(e.pointerId)})}:"ontouchend"in window?function(e,t,n){var i=!1
e.addEventListener("touchstart",function(e){1===e.touches.length&&!1!==t(e.touches[0])&&(i=!0,e.preventDefault())}),e.addEventListener("touchmove",function(e){i&&1===e.touches.length&&(e.preventDefault(),n(e.touches[0]))})}:function(e,t,n){var i=function(e){n(e)},h=function(e){removeEventListener("mouseup",h),removeEventListener("mousemove",i)}
e.addEventListener("mousedown",function(e){0===e.button&&!1!==t(e)&&(addEventListener("mousemove",i),addEventListener("mouseup",h))})},p={hsv:[0,100,100],hsl:[0,100,50],wheelDiameter:200,wheelThickness:20,handleDiameter:16,wheelReflectsSaturation:!0,onChange:function(){}},f=window.DOMMatrix||window.WebKitCSSMatrix||window.MSCSSMatrix,m=function(e){for(var t=[e];e=e.parentElement;)t.push(e)
for(var n=new f,i=t.length-1;i>=0;i--){var h=getComputedStyle(t[i]),r=h.transform
if(r&&"none"!==r){var s=h.transformOrigin.split(" ").map(parseFloat)
n=n.translate(s[0],s[1]).multiply(new f(r)).translate(-s[0],-s[1])}}return n.inverse()}
function g(e,t){var n=document.createElement(e)
return n.className=t,n}return function(){function h(e){var t=this
this.options=e,this.wheelDiameter=this.options.wheelDiameter||p.wheelDiameter,this.wheelThickness=this.options.wheelThickness||p.wheelThickness,this.handleDiameter=this.options.handleDiameter||p.handleDiameter,this.onChange=this.options.onChange||p.onChange,this.wheelReflectsSaturation=void 0!==this.options.wheelReflectsSaturation?this.options.wheelReflectsSaturation:p.wheelReflectsSaturation,this.rootElement=this.options.appendTo.appendChild(g("div","reinvented-color-wheel")),this.hueWheelElement=this.rootElement.appendChild(g("canvas","reinvented-color-wheel--hue-wheel")),this.hueWheelContext=this.hueWheelElement.getContext("2d"),this.hueHandleElement=this.rootElement.appendChild(g("div","reinvented-color-wheel--hue-handle")),this.svSpaceElement=this.rootElement.appendChild(g("canvas","reinvented-color-wheel--sv-space")),this.svSpaceContext=this.svSpaceElement.getContext("2d"),this.svHandleElement=this.rootElement.appendChild(g("div","reinvented-color-wheel--sv-handle")),this._redrawHueWheel=function(){t._redrawHueWheelRequested=!1
var e=t.wheelDiameter,n=e/2,i=n-t.wheelThickness/2,h=Math.PI/180,r=t.wheelReflectsSaturation?","+t._hsl[1]+"%,"+t._hsl[2]+"%)":",100%,50%)",s=t.hueWheelContext
s.clearRect(0,0,e,e),s.lineWidth=t.wheelThickness
for(var a=0;a<360;a++)s.beginPath(),s.arc(n,n,i,(a-90.7)*h,(a-89.3)*h),s.strokeStyle="hsl("+a+r,s.stroke()},this.hueWheelContext.imageSmoothingEnabled=!1,this.svSpaceContext.imageSmoothingEnabled=!1,this._hsv=o(e.hsv?e.hsv:e.hsl?h.hsl2hsv(e.hsl):e.rgb?h.rgb2hsv(e.rgb):e.hex?h.rgb2hsv(h.hex2rgb(e.hex)):void 0,p.hsv),this._hsl=l(h.hsv2hsl(this._hsv)),this._rgb=h.hsv2rgb(this._hsv),this._hex=h.rgb2hex(this._rgb)
var n=function(e,n){var i=t._inverseTransform.multiply(new f("matrix(1,0,0,1,"+e+","+n+")"))
return{x:i.e,y:i.f}},i=function(e){t._inverseTransform=m(e)
var i=e.getBoundingClientRect()
t._center=n(i.left+i.width/2,i.top+i.height/2)},r=function(e){var i=n(e.clientX,e.clientY),h=i.x-t._center.x,r=i.y-t._center.y,s=Math.atan2(r,h)
t.hsv=[180*s/Math.PI+90,t.hsv[1],t.hsv[2]]},s=function(e){var i=n(e.clientX,e.clientY),h=100/t.svSpaceElement.width,r=(i.x-t._center.x)*h+50,s=(t._center.y-i.y)*h+50
t.hsv=[t._hsv[0],r,s]},a=function(e){i(t.svSpaceElement),s(e)}
d(this.hueWheelElement,function(e){i(t.hueWheelElement)
var h=n(e.clientX,e.clientY),s=h.x-t._center.x,a=h.y-t._center.y,o=t.wheelDiameter/2-t.wheelThickness
if(s*s+a*a<o*o)return!1
r(e)},r),d(this.svSpaceElement,a,s),d(this.svHandleElement,a,s),this.redraw()}return Object.defineProperty(h.prototype,"hsv",{get:function(){return this._hsv},set:function(e){this._setHSV(e)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"hsl",{get:function(){return this._hsl},set:function(e){this._setHSV(h.hsl2hsv(e))},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"rgb",{get:function(){return this._rgb},set:function(e){this._setHSV(h.rgb2hsv(e))},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"hex",{get:function(){return this._hex},set:function(e){this.rgb=h.hex2rgb(e)},enumerable:!0,configurable:!0}),h.prototype.setHSV=function(){this.hsv=arguments},h.prototype.setHSL=function(){this.hsl=arguments},h.prototype.redraw=function(){this.hueWheelElement.width=this.hueWheelElement.height=this.wheelDiameter,this.svSpaceElement.width=this.svSpaceElement.height=(this.wheelDiameter-2*this.wheelThickness)*Math.SQRT1_2
var e=this.hueHandleElement.style,t=this.svHandleElement.style
e.width=e.height=t.width=t.height=this.handleDiameter+"px",e.marginLeft=e.marginTop=t.marginLeft=t.marginTop=-this.handleDiameter/2+"px",this._redrawHueWheel(),this._redrawHueHandle(),this._redrawSvSpace(),this._redrawSvHandle()},h.prototype._setHSV=function(e){var t=this._hsv,n=this._hsv=o(e,t),i=t[0]-n[0],r=t[1]-n[1]||t[2]-n[2]
i&&(this._hsl=[n[0],this._hsl[1],this._hsl[2]],this._redrawHueHandle(),this._updateSvBackground()),r&&(this._hsl=l(h.hsv2hsl(n)),this._redrawSvHandle(),this.wheelReflectsSaturation&&!this._redrawHueWheelRequested&&(requestAnimationFrame(this._redrawHueWheel),this._redrawHueWheelRequested=!0)),(i||r)&&(this._rgb=h.hsv2rgb(n),this._hex=h.rgb2hex(this._rgb),this.onChange(this))},h.prototype._redrawSvSpace=function(){this._updateSvBackground()
var e=this.svSpaceElement.width,t=this.svSpaceContext,n=t.createLinearGradient(0,0,e,0),i=t.createLinearGradient(0,0,0,e)
n.addColorStop(0,"rgba(255,255,255,1)"),n.addColorStop(1,"rgba(255,255,255,0)"),i.addColorStop(0,"rgba(0,0,0,0)"),i.addColorStop(1,"rgba(0,0,0,1)"),t.fillStyle=n,t.fillRect(0,0,e,e),t.fillStyle=i,t.fillRect(0,0,e,e)},h.prototype._updateSvBackground=function(){this.svSpaceElement.style.backgroundColor="hsl("+this._hsv[0]+",100%,50%)"},h.prototype._redrawHueHandle=function(){var e=this.wheelDiameter/2,t=e-this.wheelThickness/2,n=(this._hsv[0]-90)*Math.PI/180,i=this.hueHandleElement.style
i.left=t*Math.cos(n)+e+"px",i.top=t*Math.sin(n)+e+"px"},h.prototype._redrawSvHandle=function(){var e=this.svSpaceElement,t=this.svHandleElement.style
t.left=e.offsetLeft+e.offsetWidth*this._hsv[1]/100+"px",t.top=e.offsetTop+e.offsetHeight*(1-this._hsv[2]/100)+"px"},h.default=h,h.defaultOptions=p,h.hsv2hsl=t,h.hsl2hsv=e,h.hsv2rgb=i,h.rgb2hsv=n,h.rgb2hex=s,h.hex2rgb=a,h}()}()
